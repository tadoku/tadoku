load('ext://helm_resource', 'helm_resource', 'helm_repo')

# https://github.com/hansehe/postgres-helm/
helm_repo('postgres', 'https://raw.githubusercontent.com/hansehe/postgres-helm/master/helm/charts/postgres', resource_name='helm-repo-postgres', labels=["infra"])

# kratos
helm_resource('postgres-kratos',
              'postgres/postgres',
              flags=[
                '-f', './kratos_values.yaml',
              ],
              deps=['./kratos_values.yaml'],
              resource_deps=['helm-repo-postgres'])
k8s_resource("postgres-kratos", labels=["infra"])


# content
helm_resource('postgres-immersion',
              'postgres/postgres',
              flags=[
                '-f', './immersion_values.yaml',
              ],
              deps=['./immersion_values.yaml'],
              resource_deps=['helm-repo-postgres'])
k8s_resource("postgres-immersion", labels=["infra"])

# content
helm_resource('postgres-content',
              'postgres/postgres',
              flags=[
                '-f', './content_values.yaml',
              ],
              deps=['./content_values.yaml'],
              resource_deps=['helm-repo-postgres'])
k8s_resource("postgres-content", labels=["infra"])

# profile
helm_resource('postgres-profile',
              'postgres/postgres',
              flags=[
                '-f', './profile_values.yaml',
              ],
              deps=['./profile_values.yaml'],
              resource_deps=['helm-repo-postgres'])
k8s_resource("postgres-profile", labels=["infra"])
