// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.16.0
// source: profiles.sql

package postgres

import (
	"context"
	"database/sql"
	"time"

	"github.com/google/uuid"
)

const createProfile = `-- name: CreateProfile :one
insert into profiles (
  id,
  user_id,
  display_name,
  bio
) values (
  $1,
  $2,
  $3,
  $4
) returning id
`

type CreateProfileParams struct {
	ID          uuid.UUID
	UserID      string
	DisplayName string
	Bio         sql.NullString
}

func (q *Queries) CreateProfile(ctx context.Context, arg CreateProfileParams) (uuid.UUID, error) {
	row := q.db.QueryRowContext(ctx, createProfile,
		arg.ID,
		arg.UserID,
		arg.DisplayName,
		arg.Bio,
	)
	var id uuid.UUID
	err := row.Scan(&id)
	return id, err
}

const deleteProfile = `-- name: DeleteProfile :exec
update profiles
set
  deleted_at = now()
where
  id = $1 and
  deleted_at is null
`

func (q *Queries) DeleteProfile(ctx context.Context, id uuid.UUID) error {
	_, err := q.db.ExecContext(ctx, deleteProfile, id)
	return err
}

const findProfileByID = `-- name: FindProfileByID :one
select
  id,
  user_id,
  display_name,
  bio,
  created_at,
  updated_at
from profiles
where
  deleted_at is null
  and id = $1
`

type FindProfileByIDRow struct {
	ID          uuid.UUID
	UserID      string
	DisplayName string
	Bio         sql.NullString
	CreatedAt   time.Time
	UpdatedAt   time.Time
}

func (q *Queries) FindProfileByID(ctx context.Context, id uuid.UUID) (FindProfileByIDRow, error) {
	row := q.db.QueryRowContext(ctx, findProfileByID, id)
	var i FindProfileByIDRow
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.DisplayName,
		&i.Bio,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const findProfileByUserID = `-- name: FindProfileByUserID :one
select
  id,
  user_id,
  display_name,
  bio,
  created_at,
  updated_at
from profiles
where
  deleted_at is null
  and user_id = $1
`

type FindProfileByUserIDRow struct {
	ID          uuid.UUID
	UserID      string
	DisplayName string
	Bio         sql.NullString
	CreatedAt   time.Time
	UpdatedAt   time.Time
}

func (q *Queries) FindProfileByUserID(ctx context.Context, userID string) (FindProfileByUserIDRow, error) {
	row := q.db.QueryRowContext(ctx, findProfileByUserID, userID)
	var i FindProfileByUserIDRow
	err := row.Scan(
		&i.ID,
		&i.UserID,
		&i.DisplayName,
		&i.Bio,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateProfile = `-- name: UpdateProfile :one
update profiles
set
  display_name = $1,
  bio = $2,
  updated_at = now()
where
  id = $3 and
  deleted_at is null
returning id
`

type UpdateProfileParams struct {
	DisplayName string
	Bio         sql.NullString
	ID          uuid.UUID
}

func (q *Queries) UpdateProfile(ctx context.Context, arg UpdateProfileParams) (uuid.UUID, error) {
	row := q.db.QueryRowContext(ctx, updateProfile, arg.DisplayName, arg.Bio, arg.ID)
	var id uuid.UUID
	err := row.Scan(&id)
	return id, err
}
